<div class="superior">
  <h1 style="justify-content: center;">La masa crítica</h1>
</div>

<div class="container">
  <!-- Contenido principal de la página -->
  <div *ngIf="router.url === '/'" class="main-content">
    <div class="filters">
      <h2>Filtros</h2>
      <!-- Filtro por categoría -->
      <label for="category">Seleccionar categoría:</label>
      <select id="category" multiple [(ngModel)]="selectedCategoryId" (change)="filterItemsByCategory()">
        <option [value]="0">Todas las categorías</option>
        <option *ngFor="let category of categories" [value]="category.id">{{ category.name }}</option>
      </select>

      <!-- Filtros por precio -->
      <label for="minPrice">Precio mínimo:</label>
      <input type="number" id="minPrice" [(ngModel)]="minPrice" (change)="filterItems()">

      <label for="maxPrice">Precio máximo:</label>
      <input type="number" id="maxPrice" [(ngModel)]="maxPrice" (change)="filterItems()">

      <button (click)="filterItems()">Aplicar Filtros</button>
    </div>

    <div class="products">
      <h2>Productos</h2>
      <div *ngFor="let item of items" class="product-item">
        <h3>{{ item.name }}</h3>
        <p>Precio: {{ item.price }} </p>
        <p>Cantidad: {{ item.stock }}</p>
        <button (click)="addToCart(item.id)">Agregar al carrito</button>

      </div>
    </div>

    <div class="cart">
      <div *ngIf="cartData">
        <h3>Productos en el Carrito:</h3>
        <ul>
          <li *ngFor="let item of cartData.items">
            Producto: {{ item.name }} - Cantidad: {{ item.quantity }}
            <button (click)="decreaseQuantity(item)">-</button>
            <input type="number" [(ngModel)]="item.quantity" (change)="updateQuantity(item)" min="1" />
            <button (click)="increaseQuantity(item)">+</button>
            <button (click)="eliminateToCart(item.itemId)">Eliminar del carrito</button>
          </li>
        </ul>
      </div>
      <button (click)="goToCheckout()">Checkout</button>
      <div *ngIf="!cartData">
        <p>No se ha encontrado el carrito.</p>
      </div>
    </div>
  </div>

  <!-- Aquí se cargará la vista de la página "Checkout" -->
  <router-outlet></router-outlet>
</div>
